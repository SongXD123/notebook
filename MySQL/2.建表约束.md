# 一.MySQL约束类型

|  约束名称   |                             描述                             |
| :---------: | :----------------------------------------------------------: |
|  NOT NULL   |                           非空约束                           |
|   UNIQUE    |                    唯一约束，取值不能重复                    |
| PRIMARY KEY | 主键约束（主关键字），自带非空、唯一、索引，每个表必须有主键 |
| FOREIGN KEY |          外键约束（外关键字），体现关系型数据库关系          |
|   DEFAULT   |                       默认值（缺省值）                       |

# 二.MySQL约束类型举例

### 1.[NOT] NULL非空约束

```sql
drop table if EXISTS author;
CREATE TABLE author(
	aut_id varchar(8) NOT NULL,
	aut_name varchar(50) NOT NULL,
	country varchar(25) NOT NULL,
	home_city varchar(25) NOT NULL
);

```

### 2.UNIQUE约束

* 实现1（表的定义最后施加）

```sql
drop table if EXISTS author;
CREATE TABLE IF NOT EXISTS author(
	aut_id varchar(8) NOT NULL ,
	aut_name varchar(50) NOT NULL,
	country varchar(25) NOT NULL，
    //在表最后声明
	UNIQUE (aut_id)
);
```

* 实现2（在字段定义的最后施加）

```sql
drop table if EXISTS author;
CREATE TABLE IF NOT EXISTS author(
	aut_id varchar(8) NOT NULL UNIQUE,
	aut_name varchar(50) NOT NULL,
	country varchar(25) NOT NULL，
);
```

### 3.DEFAULT约束

```sql
drop table if EXISTS author;
CREATE TABLE IF NOT EXISTS author(
	aut_id varchar(8) NOT NULL UNIQUE ,
	aut_name varchar(50) NOT NULL,
	country varchar(25) DEFAULT '中国'
);
```

### 4.PRIMARY KEY约束

* 主键自带**唯一约束和非空约束**
* **==可以由多个字段构成联合主键==**
* ==**主键最好为数字**==

#### 5.1 单个字段作为主键（方法1）

```sql
drop table if EXISTS author;
	CREATE TABLE author(
	aut_id int PRIMARY KEY,
	aut_name varchar(50) NOT NULL,
	country varchar(25) NOT NULL
);
```

#### 5.2 单个字段作为主键（方法2）

```sql
drop table if EXISTS author;
CREATE TABLE author(
	aut_id varchar(8),
	aut_name varchar(50) NOT NULL,
	country varchar(25) NOT NULL,
	PRIMARY KEY (aut_id)
);
```

#### 5.3 多个字段作为主键

**==只要合起来不一样即可==**

```sql
drop table if EXISTS author;
CREATE TABLE author(
	aut_id varchar(8) not null,
	aut_name varchar(50) not null,
	country varchar(25) NOT NULL,
	PRIMARY KEY (aut_id, country)
)
```

### 5.AUTO_INCREMENT约束

* ==**需要配合主键使用，主键自动增长**==
* 从第一条插入语句开始就可以不填主键

```sql
drop table if EXISTS author;
CREATE TABLE author(
	aut_id varchar(8) PRIMARY KEY AUTO_INCREMENT,
	aut_name varchar(50) NOT NULL,
	country varchar(25) NOT NULL
);
```

### 6.FOREIGN KEY约束

* 外键可以建立多个，多个外键接着写即可
* 外键产生效果时
  * 删除表时，如果不删除引用外键的表，被引用的表不能直接删除
  * 外键的值必须来源于引用的表的主键字段
* 语法：**==FOREIGN KEY [column list] REFERENCES \[primary key table]([column list])==**

```sql
drop table if EXISTS author;
CREATE table author(
	aut_id int PRIMARY key auto_increment,
    aut_name VARCHAR(10) not null,
    country VARCHAR(20) DEFAULT '中国'
);
drop table if EXISTS book;
CREATE TABLE IF NOT EXISTS book(
    book_id int PRIMARY key auto_increment,
    book_name varchar(50),
    aut_id int,
    book_price decimal(8,2),
    FOREIGN key(aut_id) REFERENCES author(aut_id)
);

INSERT into author(aut_name) VALUES('a1');
INSERT into book(book_name, aut_id) VALUES('a2',2)
```

