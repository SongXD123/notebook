ORB-SLAM2：

ORB-SLAM2是视觉SLAM中特征点法的开源代表作，同时支持单目、双目、RGBD相机，涵盖视觉SLAM领域重要知识，如实时跟踪、局部地图、回环检测、BA优化，工程技巧。适合二次开发，视觉SLAM工作必备，为学习ORB-SLAM3打基础 。

框架：

![image-20210315210247595](images/image-20210315210247595.png)

**主体三个线程**：

* Tracking：跟踪
  * 预处理
  * 初步跟踪
    * Pose prediction：参考关键帧跟踪
    * Motion model：恒速模型
    * Relocalization：重定位跟踪
  * Track Local Map：用局部地图进行更精确跟踪
  * new keyframe decision：根据跟踪结果判断是否生成关键帧
* Local Mapping：局部建图（只对关键帧操作，不管普通帧）
  * KeyFrame Insertion：生成关键帧插入Local Mapping
  * Recent MapPoints Culling：地图点筛选（tracking时，选入了较多地图点，这里进行较为严格的筛选）
  * New Points Creation：由关键帧生成新的地图点
  * Local BA：对位姿和地图点进行多个帧的BA（tracking中只对位姿进行BA）
  * Local KeyFrames Culling：关键帧剔除
* Loop Closing：闭环检测
  * Loop Detection
    * Query Database：关键帧放入一个Database（即Recognittion Database)，每插入一个关键帧，都会去查询是否发生闭环
    * Compute SE3：确认闭环，计算SE3
  * Loop Correction:
    * Loop Fusion：闭环融合。当前关键帧和闭环关键帧用SE3作矫正，对地图点位姿进行融合
    * Optimizatoin Essential Graph：优化本质图
* 最后，FULL BA（全局BA），更新地图
* 其他：
  * MAP：地图点(MapPoints)、关键帧(KeyFrames)、共视图(Covisibility Graph)、扩展树(Spanning Tree)
  * Place Recognition（位置识别，通过词袋模型）

**ORB-SLAM2特点**

* 所有的任务（跟踪/局部地图/闭环/重定位）采用相同的特征，使得系统更高效、简单可靠  
* ORB特征具有旋转/光照不变性，无需GPU即可实时  
* 共视图使得跟踪/建图控制在局部共视区域，与全局地图大小无关，可以在大场景下运行  
* 使用Essential Graph来优化位姿实现回环检测，耗时少精度高  
* 实时重定位使得在跟踪丢失后可以恢复位姿，增强地图重用性  
* 单目初始化和应用场景解耦，不管是平面/非平面场景，都可以自动初始化，无需人工干预  
* 地图点和关键帧创建比较宽松，但后续会进行严格筛选，剔除冗余关键帧和误差大的地图点，增加建图过程的弹性，在大旋转、快速运动、纹理不足等恶劣情况下可以提高跟踪的鲁棒性  
* 相比于直接法（距离较远，时间较长时，灰度不变可能不成立，光度误差大），可以用于宽基线匹配（视图不变性和光照不变性），更适合于对深度精度要求较高的三维重建  
* 适用于手持设备、汽车、机器人  
* 集各种优秀的算法于一身，特征点法SLAM中最佳方案  